<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  <title>Archive Item â€“ WMRN</title>

  <link rel="stylesheet" href="/wmrn-archive-app/styles.css">
  <meta name="theme-color" content="#9b1c1c">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="WMRN Archive">

  <!-- GLOBAL APP LOGIC -->
  <script src="/wmrn-archive-app/app.js" defer></script>

  <!-- ARCHIVE ITEM DATA (THIS WAS MISSING) -->
  <script src="/wmrn-archive-app/archive-items.js" defer></script>
</head>

<body>

<main>

  <!-- ITEM TITLE -->
  <header>
    <h1 id="itemTitle">Archive Item</h1>
    <p class="muted" id="itemSubtitle"></p>
  </header>

  <!-- ARCHIVE ITEM MEDIA -->
  <section class="archive-media" id="mediaSection" hidden>
    <figure>
      <img
        id="itemImage"
        src=""
        alt=""
        loading="lazy"
      >
      <figcaption class="muted" id="itemCaption"></figcaption>
    </figure>
  </section>

  <!-- METADATA RECORD -->
  <section class="archive-meta" id="metaSection" hidden>
    <p><strong>Accession:</strong> <span id="itemAccession"></span></p>
    <p><strong>Date:</strong> <span id="itemDate"></span></p>
    <p><strong>Format:</strong> <span id="itemFormat"></span></p>
    <p><strong>Decade:</strong> <span id="itemDecade"></span></p>
    <p><strong>Collection:</strong> <span id="itemCollection"></span></p>
  </section>

  <!-- DESCRIPTION -->
  <section class="archive-description" id="descriptionSection" hidden>
    <h2>Description</h2>
    <p id="itemDescription"></p>
  </section>

  <!-- CONTEXT & NOTES -->
  <section class="archive-context" id="contextSection" hidden>
    <h3>Context &amp; Notes</h3>
    <ul id="itemNotes"></ul>
  </section>

  <!-- RIGHTS -->
  <section class="archive-rights" id="rightsSection" hidden>
    <h3>Rights &amp; Credit</h3>
    <p id="itemRights"></p>
    <p class="muted">
      Some materials may be restricted due to condition, rights, or donor preferences.
    </p>
  </section>

  <!-- FALLBACK MESSAGE -->
  <section id="errorSection">
    <p class="muted">
      No archive item selected. Please return to the archive and choose an item.
    </p>
  </section>

  <!-- NAVIGATION CONTEXT -->
  <section class="archive-navigation">
    <p>
      <a href="/wmrn-archive-app/decades.html">â† Back to Decades</a>
      &nbsp;&nbsp;
      <a href="/wmrn-archive-app/photos.html">View More Photos â†’</a>
    </p>
  </section>

</main>

<!-- FLOATING BOTTOM NAV -->
<nav class="bottom-nav" id="bottomNav" aria-label="Primary navigation">
  <a href="/wmrn-archive-app/index.html"><span class="icon">ğŸ </span><span>Home</span></a>
  <a href="/wmrn-archive-app/decades.html"><span class="icon">ğŸ“†</span><span>Decades</span></a>
  <a href="/wmrn-archive-app/photos.html"><span class="icon">ğŸ“·</span><span>Photos</span></a>
  <a href="/wmrn-archive-app/audio.html"><span class="icon">ğŸ™ï¸</span><span>Audio</span></a>
  <a href="/wmrn-archive-app/submit.html"><span class="icon">âœï¸</span><span>Submit</span></a>
  <a href="/wmrn-archive-app/settings.html"><span class="icon">âš™ï¸</span><span>Settings</span></a>
</nav>

<!-- ITEM LOADER -->
<script>
  const params = new URLSearchParams(window.location.search);
  const itemId = params.get("item");

  if (itemId && window.archiveItems && archiveItems[itemId]) {
    const item = archiveItems[itemId];

    document.getElementById("errorSection").hidden = true;

    document.getElementById("itemTitle").textContent = item.title;
    document.getElementById("itemSubtitle").textContent = item.subtitle;

    document.getElementById("itemImage").src = `/wmrn-archive-app/Photos/${item.image}`;
    document.getElementById("itemImage").alt = item.title;
    document.getElementById("itemCaption").textContent = item.caption;

    document.getElementById("itemAccession").textContent = item.accession;
    document.getElementById("itemDate").textContent = item.date;
    document.getElementById("itemFormat").textContent = item.format;
    document.getElementById("itemDecade").textContent = item.decade;
    document.getElementById("itemCollection").textContent = item.collection;
    document.getElementById("itemDescription").textContent = item.description;
    document.getElementById("itemRights").textContent = item.rights;

    const notesList = document.getElementById("itemNotes");
    item.notes.forEach(note => {
      const li = document.createElement("li");
      li.textContent = note;
      notesList.appendChild(li);
    });

    document.getElementById("mediaSection").hidden = false;
    document.getElementById("metaSection").hidden = false;
    document.getElementById("descriptionSection").hidden = false;
    document.getElementById("contextSection").hidden = false;
    document.getElementById("rightsSection").hidden = false;
  }
</script>

</body>
</html>