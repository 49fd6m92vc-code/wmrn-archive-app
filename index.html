<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<title>WMRN Radio History Archive</title>

<link rel="manifest" href="/wmrn-archive-app/manifest.json">
<link rel="stylesheet" href="/wmrn-archive-app/styles.css">
<meta name="theme-color" content="#9b1c1c">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="WMRN Archive">
<link rel="apple-touch-icon" href="/wmrn-archive-app/icons/icon-192.png">

<script src="/wmrn-archive-app/app.js" defer></script>
</head>

<body>

<header>
  <img class="logo" src="/wmrn-archive-app/icons/logo.png" alt="WMRN Logo">
  <h1>WMRN Radio History Archive</h1>
  <p class="tagline">Preserving the voices, people, and legacy of WMRN Radio.</p>
</header>

<main>
  <p>
    Welcome to the WMRN Radio History Archive. This project preserves recordings,
    photographs, documents, and memories connected to WMRN Radio and its role
    in Marion, Ohio and beyond.
  </p>
</main>

<!-- PAGE CONTENT ABOVE -->

<main>
  <!-- page-specific content -->
</main>

<!-- FLOATING BOTTOM NAV -->
<nav class="bottom-nav" id="bottomNav">
  <a href="/wmrn-archive-app/index.html">
    <span class="icon">ğŸ </span>
    <span>Home</span>
  </a>
  <a href="/wmrn-archive-app/decades.html">
    <span class="icon">ğŸ“†</span>
    <span>Decades</span>
  </a>
  <a href="/wmrn-archive-app/photos.html">
    <span class="icon">ğŸ“·</span>
    <span>Photos</span>
  </a>
  <a href="/wmrn-archive-app/audio.html">
    <span class="icon">ğŸ™ï¸</span>
    <span>Audio</span>
  </a>
  <a href="/wmrn-archive-app/submit.html">
    <span class="icon">âœï¸</span>
    <span>Submit</span>
  </a>
</nav>

<!-- NAV BEHAVIOR: AUTO-HIGHLIGHT + HAPTICS + SWIPE -->
<script>
  /* =========================
     AUTO-HIGHLIGHT ACTIVE TAB
     ========================= */
  const navLinks = document.querySelectorAll(".bottom-nav a");
  const currentPath = window.location.pathname;

  navLinks.forEach(link => {
    if (currentPath.includes(link.getAttribute("href"))) {
      link.classList.add("active");
    }
  });

  /* =========================
     HAPTIC FEEDBACK ON TAP
     ========================= */
  function hapticTap() {
    if (navigator.vibrate) {
      navigator.vibrate(10);
    }
  }

  navLinks.forEach(link => {
    link.addEventListener("click", hapticTap);
  });

  /* =========================
     SWIPE NAVIGATION (FIXED)
     ========================= */
  const pages = [
    "/wmrn-archive-app/index.html",
    "/wmrn-archive-app/decades.html",
    "/wmrn-archive-app/photos.html",
    "/wmrn-archive-app/audio.html",
    "/wmrn-archive-app/submit.html"
  ];

  let startX = 0;
  let startY = 0;
  let isSwiping = false;

  window.addEventListener("touchstart", e => {
    const touch = e.touches[0];
    startX = touch.clientX;
    startY = touch.clientY;
    isSwiping = true;
  }, { passive: true });

  window.addEventListener("touchmove", e => {
    if (!isSwiping) return;

    const touch = e.touches[0];
    const diffX = Math.abs(touch.clientX - startX);
    const diffY = Math.abs(touch.clientY - startY);

    /* Cancel swipe if vertical scrolling dominates */
    if (diffY > diffX) {
      isSwiping = false;
    }
  }, { passive: true });

  window.addEventListener("touchend", e => {
    if (!isSwiping) return;

    const touch = e.changedTouches[0];
    const diffX = touch.clientX - startX;

    /* Require intentional horizontal swipe */
    if (Math.abs(diffX) < 90) {
      isSwiping = false;
      return;
    }

    const index = pages.findIndex(p =>
      currentPath.includes(p)
    );

    if (diffX < 0 && index < pages.length - 1) {
      /* Swipe left â†’ next page */
      window.location.href = pages[index + 1];
    }

    if (diffX > 0 && index > 0) {
      /* Swipe right â†’ previous page */
      window.location.href = pages[index - 1];
    }

    isSwiping = false;
  }, { passive: true });
</script>

</body>
</html>
